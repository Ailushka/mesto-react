{"version":3,"sources":["images/logo.svg","components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/PopupWithForm.js","components/ImagePopup.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/Register.js","components/Login.js","images/success.svg","images/fail.svg","components/InfoTooltip.js","components/ProtectedRoute.js","utils/api.js","utils/auth.js","components/App.js","index.js"],"names":["Header","props","location","useLocation","className","src","logo","alt","pathname","currentUserEmail","onClick","onLogOut","to","CurrentUserContext","React","createContext","Card","currentUser","useContext","isOwn","card","owner","_id","cardDeleteButtonClassName","isLiked","likes","some","i","cardLikeButtonClassName","link","name","onCardClick","type","onCardDelete","aria-label","onCardLike","length","Main","onEditAvatar","avatar","onEditProfile","about","onAddPlace","cards","map","Footer","Date","getFullYear","PopupWithForm","popupClassNames","isOpen","onSubmit","title","children","buttonTitle","onClose","ImagePopup","EditProfilePopup","useState","setName","description","setDescription","useEffect","e","preventDefault","onUpdateUser","value","onChange","target","minLength","maxLength","id","required","EditAvatarPopup","avatarRef","useRef","onUpdateAvatar","current","placeholder","ref","AddPlacePopup","placeName","setPlaceName","placeLink","setPlaceLink","Register","email","setEmail","password","setPassword","onRegister","Login","onLogin","InfoTooltip","status","success","fail","ProtectedRoute","Component","component","loggedIn","api","url","this","_url","_password","fetch","method","headers","authorization","then","_checkResponse","user","body","JSON","stringify","item","cardId","hasLike","res","ok","json","Promise","reject","auth","baseUrl","token","data","App","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isInfoTooltipOpen","setIsInfoTooltipOpen","selectedCard","setSelectedCard","setCurrentUser","setCards","setLoggedIn","setCurrentUserEmail","infoTooltip","setInfoTooltip","history","useHistory","closeAllPopups","getUserInfo","catch","err","console","log","getInitialCards","localStorage","getItem","getContent","push","tokenCheck","Provider","removeItem","exact","path","toggleLikeCardStatus","newCard","state","c","deleteCard","filter","signup","signin","setItem","patchUserInfo","postCard","patchUserAvatar","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.794ffc3d.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.03b78ada.svg\";","import logo from '../images/logo.svg';\r\nimport { Link, useLocation } from 'react-router-dom';\r\n\r\nfunction Header(props) {\r\n\r\n  const location = useLocation();\r\n\r\n  return (\r\n    <header className=\"header container\">\r\n      <div className=\"header__content\">\r\n        <img className=\"header__logo\" src={logo} alt=\"Логотип проекта Mesto Russia\" />\r\n        <ul className=\"user-nav\">\r\n          <li className=\"user-nav__item user-nav__item_type_email\">\r\n          {\r\n            location.pathname === '/'\r\n            ? props.currentUserEmail\r\n            : ''\r\n          }\r\n          </li>\r\n          <li\r\n            className=\"user-nav__item user-nav__item_type_sign\"\r\n            onClick={location.pathname === '/' ? props.onLogOut : () => {}}\r\n          >\r\n          <Link className=\"user-nav__link\" to={\r\n            location.pathname === '/sign-up'\r\n            ? '/sign-in'\r\n            : location.pathname === '/sign-in'\r\n            ? '/sign-up'\r\n            : '/sign-in'\r\n          }>\r\n          {\r\n            location.pathname === '/sign-up'\r\n            ? 'Войти'\r\n            : location.pathname === '/sign-in'\r\n            ? 'Регистрация'\r\n            : 'Выйти'\r\n          }\r\n          </Link>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    </header>\r\n  );\r\n}\r\n\r\nexport default Header;\r\n","import React from 'react';\r\n\r\nexport const CurrentUserContext = React.createContext();\r\n","import { useContext } from 'react';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext.js';\r\n\r\nfunction Card(props) {\r\n\r\n  const currentUser = useContext(CurrentUserContext);\r\n\r\n  const isOwn = props.card.owner._id === currentUser._id;\r\n  const cardDeleteButtonClassName = (\r\n  `button ${isOwn ? 'button_type_delete' : ''}`\r\n);\r\n\r\n  const isLiked = props.card.likes.some(i => i._id === currentUser._id);\r\n  const cardLikeButtonClassName = (\r\n  `button button_type_like ${isLiked ? 'button_clicked' : ''}`\r\n);\r\n\r\n\r\n  function handleClick() {\r\n    props.onCardClick(props.card);\r\n  }\r\n\r\n  function handleLikeClick() {\r\n    props.onCardLike(props.card);\r\n  }\r\n\r\n  function handleDeleteClick() {\r\n    props.onCardDelete(props.card);\r\n\r\n  }\r\n\r\n  return (\r\n    <li className=\"gallery__item\">\r\n      <img className=\"gallery__item-image\" src={props.card.link} alt={props.card.name} onClick={handleClick}/>\r\n      <button type=\"button\" className={cardDeleteButtonClassName} onClick={handleDeleteClick} aria-label=\"Удалить\"></button>\r\n      <div className=\"gallery__item-info\">\r\n        <h2 className=\"gallery__item-title\">{props.card.name}</h2>\r\n        <div className=\"gallery__item-likes\">\r\n          <button type=\"button\" className={cardLikeButtonClassName} onClick={handleLikeClick} aria-label=\"Нравится\"></button>\r\n          <span className=\"gallery__item-like-counter\">{props.card.likes.length}</span>\r\n        </div>\r\n      </div>\r\n    </li>\r\n  );\r\n}\r\n\r\nexport default Card;\r\n","import { useContext } from 'react';\r\nimport Card from './Card.js';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext.js';\r\n\r\nfunction Main(props) {\r\n\r\n  const currentUser = useContext(CurrentUserContext);\r\n\r\n  return (\r\n    <main className=\"main\">\r\n      <section className=\"profile container\">\r\n        <div className=\"profile__overlay\" onClick={props.onEditAvatar}>\r\n          <img className=\"profile__avatar\" alt=\"Фото профиля\" src={currentUser.avatar} />\r\n        </div>\r\n        <div className=\"profile__text\">\r\n          <h1 className=\"profile__name\">{currentUser.name}</h1>\r\n          <button type=\"button\" className=\"button button_type_edit\" aria-label=\"Редактировать\" onClick={props.onEditProfile}></button>\r\n          <p className=\"profile__job\">{currentUser.about}</p>\r\n        </div>\r\n        <button type=\"button\" className=\"button button_type_add\" aria-label=\"Добавить\" onClick={props.onAddPlace}></button>\r\n      </section>\r\n\r\n      <section className=\"gallery container\">\r\n        <ul className=\"gallery__list\">\r\n\r\n          {props.cards.map((card) => {\r\n            return (\r\n              <Card\r\n                key={card._id}\r\n                card={card}\r\n                onCardClick={props.onCardClick}\r\n                onCardLike={props.onCardLike}\r\n                onCardDelete={props.onCardDelete}\r\n              />\r\n            );\r\n          })}\r\n\r\n        </ul>\r\n      </section>\r\n    </main>\r\n  );\r\n}\r\n\r\nexport default Main;\r\n","function Footer() {\r\n  return (\r\n    <footer className=\"footer container\">\r\n      <p className=\"footer__copyright\">&copy; {new Date().getFullYear()} Mesto Russia</p>\r\n    </footer>\r\n  );\r\n}\r\n\r\nexport default Footer;\r\n","function PopupWithForm(props) {\r\n\r\n  const popupClassNames = `popup popup_type_${props.name} ${props.isOpen ? 'popup_opened' : ''}`;\r\n\r\n  return (\r\n    <div className={popupClassNames}>\r\n      <div className=\"popup__container\">\r\n        <form className={`form form_type_${props.name}`} name={props.name} onSubmit={props.onSubmit}>\r\n          <h2 className=\"form__title\">{props.title}</h2>\r\n          {props.children}\r\n          <button className=\"button button_type_save\" type=\"submit\">{props.buttonTitle}</button>\r\n        </form>\r\n        <button className=\"button button_type_close\" type=\"button\" aria-label=\"Закрыть\" onClick={props.onClose}></button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PopupWithForm;\r\n","function ImagePopup(props) {\r\n\r\n  const popupClassNames = `popup ${props.card ? 'popup_opened' : ''}`;\r\n\r\n  return (\r\n    <div className={popupClassNames}>\r\n      <div className=\"popup__image-container\">\r\n        <img className=\"popup__image\" src={props.card && props.card.link} alt={props.card && props.card.name} />\r\n        <h3 className=\"popup__image-title\">{props.card && props.card.name}</h3>\r\n        <button className=\"button button_type_close\" type=\"button\" aria-label=\"Закрыть\" onClick={props.onClose}></button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ImagePopup;\r\n","import PopupWithForm from './PopupWithForm.js';\r\nimport { useState, useEffect, useContext } from 'react';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext.js';\r\n\r\nfunction EditProfilePopup(props) {\r\n  const currentUser = useContext(CurrentUserContext);\r\n  const [name, setName] = useState('');\r\n  const [description, setDescription] = useState('');\r\n\r\n  useEffect(() => {\r\n    setName(currentUser.name || '');\r\n    setDescription(currentUser.about || '');\r\n  }, [currentUser]);\r\n\r\n  function handleNameChange(e) {\r\n    setName(e.target.value);\r\n  }\r\n\r\n  function handleDescriptionChange(e) {\r\n    setDescription(e.target.value);\r\n  }\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n\r\n    props.onUpdateUser({\r\n      name,\r\n      about: description,\r\n    });\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      isOpen={props.isOpen}\r\n      onClose={props.onClose}\r\n      title='Редактировать профиль'\r\n      name={'profile-form'}\r\n      buttonTitle='Сохранить'\r\n      onSubmit={handleSubmit}\r\n    >\r\n      <fieldset className=\"form__content form__user-info\">\r\n        <input\r\n          className=\"form__item form__item_type_name\"\r\n          value={name}\r\n          onChange={handleNameChange}\r\n          type=\"text\"\r\n          name=\"name\"\r\n          minLength=\"2\"\r\n          maxLength=\"40\"\r\n          id=\"user-name\"\r\n          required\r\n        />\r\n        <span id=\"user-name-error\" className=\"form__item-error\"></span>\r\n        <input\r\n          className=\"form__item form__item_type_job\"\r\n          value={description}\r\n          onChange={handleDescriptionChange}\r\n          type=\"text\"\r\n          name=\"job\"\r\n          minLength=\"2\"\r\n          maxLength=\"200\"\r\n          id=\"user-job\"\r\n          required\r\n        />\r\n        <span id=\"user-job-error\" className=\"form__item-error\"></span>\r\n      </fieldset>\r\n\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default EditProfilePopup;\r\n","import PopupWithForm from './PopupWithForm.js';\r\nimport { useRef } from 'react';\r\n\r\nfunction EditAvatarPopup(props) {\r\n  const avatarRef = useRef();\r\n\r\n  function handleSubmit(e) {\r\n  e.preventDefault();\r\n\r\n  props.onUpdateAvatar({\r\n    avatar: avatarRef.current.value,\r\n  });\r\n}\r\n\r\n  return (\r\n    <PopupWithForm\r\n      isOpen={props.isOpen}\r\n      onClose={props.onClose}\r\n      title='Обновить аватар'\r\n      name={'avatar-update-form'}\r\n      buttonTitle='Сохранить'\r\n      onSubmit={handleSubmit}\r\n    >\r\n      <input\r\n        className=\"form__item form__item_type_avatar-update\"\r\n        type=\"url\"\r\n        name=\"link\"\r\n        placeholder=\"Ссылка на аватар\"\r\n        id=\"avatar-update\"\r\n        required\r\n        ref={avatarRef}\r\n      />\r\n      <span id=\"avatar-update-error\" className=\"form__item-error\"></span>\r\n\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default EditAvatarPopup;\r\n","import { useState } from 'react';\r\nimport PopupWithForm from './PopupWithForm.js';\r\n\r\nfunction AddPlacePopup(props) {\r\n\r\n  const [placeName, setPlaceName] = useState('');\r\n  const [placeLink, setPlaceLink] = useState('');\r\n\r\n  function handlePlaceNameChange(e) {\r\n    setPlaceName(e.target.value);\r\n  }\r\n\r\n  function handlePlaceLinkChange(e) {\r\n    setPlaceLink(e.target.value);\r\n  }\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n\r\n    props.onAddPlace({\r\n    name: placeName,\r\n    link: placeLink,\r\n  });\r\n    setPlaceName('');\r\n    setPlaceLink('');\r\n}\r\n\r\n  return (\r\n    <PopupWithForm\r\n      isOpen={props.isOpen}\r\n      onClose={props.onClose}\r\n      title='Новое место'\r\n      name={'add-form'}\r\n      buttonTitle='Создать'\r\n      onSubmit={handleSubmit}\r\n    >\r\n      <fieldset className=\"form__content form__add-card\">\r\n        <input\r\n          className=\"form__item form__item_type_card-name\"\r\n          value={placeName}\r\n          onChange={handlePlaceNameChange}\r\n          type=\"text\"\r\n          name=\"name\"\r\n          placeholder=\"Название\"\r\n          minLength=\"2\"\r\n          maxLength=\"30\"\r\n          id=\"card-name\"\r\n          required\r\n        />\r\n        <span id=\"card-name-error\" className=\"form__item-error\"></span>\r\n        <input\r\n          className=\"form__item form__item_type_card-link\"\r\n          value={placeLink}\r\n          onChange={handlePlaceLinkChange}\r\n          type=\"url\"\r\n          name=\"link\"\r\n          placeholder=\"Ссылка на картинку\"\r\n          id=\"card-link\"\r\n          required\r\n        />\r\n        <span id=\"card-link-error\" className=\"form__item-error\"></span>\r\n      </fieldset>\r\n\r\n    </PopupWithForm>\r\n);\r\n}\r\n\r\nexport default AddPlacePopup;\r\n","import { Link } from 'react-router-dom';\r\nimport { useState } from 'react';\r\n\r\nfunction Register(props) {\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n\r\n  function handleEmailChange(e) {\r\n    setEmail(e.target.value);\r\n  }\r\n\r\n  function handlePasswordChange(e) {\r\n    setPassword(e.target.value);\r\n  }\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n\r\n    props.onRegister(email, password);\r\n  }\r\n\r\n  return (\r\n    <section className=\"sign\">\r\n      <form className=\"form form_type_sign-up\" onSubmit={handleSubmit}>\r\n        <h2 className=\"sign__title\">Регистрация</h2>\r\n        <fieldset className=\"form__content form__sign\">\r\n          <input\r\n            className=\"sign__item\"\r\n            onChange={handleEmailChange}\r\n            type=\"email\"\r\n            name=\"email\"\r\n            id=\"email\"\r\n            placeholder=\"Email\"\r\n            required\r\n          />\r\n          <input\r\n            className=\"sign__item\"\r\n            onChange={handlePasswordChange}\r\n            type=\"password\"\r\n            name=\"password\"\r\n            id=\"password\"\r\n            placeholder=\"Пароль\"\r\n            required\r\n          />\r\n        </fieldset>\r\n        <button type=\"submit\" className=\"sign__button\">Зарегистрироваться</button>\r\n      </form>\r\n      <div className=\"sign__login\">\r\n          <p className=\"sign__login-text\">Уже зарегистрированы?</p>\r\n          <Link to=\"/sign-in\" className=\"sign__login-link\">Войти</Link>\r\n        </div>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default Register;\r\n","import { useState } from 'react';\r\n\r\nfunction Login(props) {\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n\r\n  function handleEmailChange(e) {\r\n    setEmail(e.target.value);\r\n  }\r\n\r\n  function handlePasswordChange(e) {\r\n    setPassword(e.target.value);\r\n  }\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n\r\n    props.onLogin(email, password);\r\n  }\r\n\r\n  return (\r\n    <section className=\"sign\">\r\n      <form className=\"form form_type_sign-in\" onSubmit={handleSubmit}>\r\n        <h2 className=\"sign__title\">Вход</h2>\r\n        <fieldset className=\"form__content form__sign\">\r\n          <input\r\n            className=\"sign__item\"\r\n            onChange={handleEmailChange}\r\n            type=\"email\"\r\n            name=\"email\"\r\n            id=\"email\"\r\n            placeholder=\"Email\"\r\n            required\r\n          />\r\n          <input\r\n            className=\"sign__item\"\r\n            onChange={handlePasswordChange}\r\n            type=\"password\"\r\n            name=\"password\"\r\n            id=\"password\"\r\n            placeholder=\"Пароль\"\r\n            required\r\n          />\r\n        </fieldset>\r\n        <button type=\"submit\" className=\"sign__button\">Войти</button>\r\n      </form>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n","export default __webpack_public_path__ + \"static/media/success.1b6082f8.svg\";","export default __webpack_public_path__ + \"static/media/fail.df8eddf6.svg\";","import success from '../images/success.svg';\r\nimport fail from '../images/fail.svg';\r\n\r\nfunction InfoTooltip(props) {\r\n\r\n  const popupClassNames = `popup ${props.isOpen ? 'popup_opened' : ''}`;\r\n\r\n  return (\r\n    <div className={popupClassNames}>\r\n      <div className=\"infotooltip\">\r\n        <img className=\"infotooltip__image\" src={props.status ? success : fail} alt={props.status ? 'Вы успешно зарегистрировались!' : 'Что-то пошло не так! Попробуйте ещё раз.'} />\r\n        <p className=\"infotooltip__status\">{props.status ? 'Вы успешно зарегистрировались!' : 'Что-то пошло не так! Попробуйте ещё раз.'}</p>\r\n        <button className=\"button button_type_close\" type=\"button\" aria-label=\"Закрыть\" onClick={props.onClose}></button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default InfoTooltip;\r\n","import { Route, Redirect } from 'react-router-dom';\r\n\r\nfunction ProtectedRoute({ component: Component, ...props }) {\r\n  return (\r\n    <Route>\r\n      {() =>\r\n        props.loggedIn ? <Component {...props} /> : <Redirect to=\"/sign-up\" />\r\n      }\r\n    </Route>\r\n  );\r\n};\r\n\r\nexport default ProtectedRoute;\r\n","class Api {\r\n  constructor(url, password) {\r\n    this._url = url;\r\n    this._password = password;\r\n  }\r\n\r\n  // загрузка информации о пользователе с сервера (получаем данные пользователя)\r\n  getUserInfo() {\r\n    return fetch(`${this._url}/users/me`, {\r\n      method: 'GET',\r\n      headers: {\r\n        authorization: this._password,\r\n      }\r\n    })\r\n    .then(this._checkResponse)\r\n  }\r\n\r\n  // загрузка карточек с сервера (получаем список всех карточек в виде массива)\r\n  getInitialCards() {\r\n    return fetch(`${this._url}/cards`, {\r\n      method: 'GET',\r\n      headers: {\r\n        authorization: this._password,\r\n      }\r\n    })\r\n    .then(this._checkResponse)\r\n  }\r\n\r\n  // редактирование профиля (меняем данные пользователя)\r\n  patchUserInfo(user) {\r\n    return fetch(`${this._url}/users/me`, {\r\n      method: 'PATCH',\r\n      headers: {\r\n        authorization: this._password,\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        name: user.name,\r\n        about: user.about\r\n      })\r\n    })\r\n    .then(this._checkResponse)\r\n  }\r\n\r\n  // добавление новой карточки\r\n  postCard(item) {\r\n    return fetch(`${this._url}/cards`, {\r\n      method: 'POST',\r\n      headers: {\r\n        authorization: this._password,\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        name: item.name,\r\n        link: item.link\r\n      })\r\n    })\r\n    .then(this._checkResponse)\r\n  }\r\n\r\n  // удаление карточки\r\n  deleteCard(cardId) {\r\n    return fetch(`${this._url}/cards/${cardId}`, {\r\n      method: 'DELETE',\r\n      headers: {\r\n        authorization: this._password,\r\n      }\r\n    })\r\n    .then(this._checkResponse)\r\n  }\r\n\r\n  // постановка или снятие лайка\r\n  toggleLikeCardStatus(cardId, hasLike) {\r\n    return fetch(`${this._url}/cards/likes/${cardId}`, {\r\n      method: hasLike ? 'PUT' : 'DELETE',\r\n      headers: {\r\n        authorization: this._password,\r\n      }\r\n    })\r\n    .then(this._checkResponse)\r\n  }\r\n\r\n  // обновление аватара пользователя\r\n  patchUserAvatar(user) {\r\n    return fetch(`${this._url}/users/me/avatar`, {\r\n      method: 'PATCH',\r\n      headers: {\r\n        authorization: this._password,\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        avatar: user.avatar\r\n      })\r\n    })\r\n    .then(this._checkResponse)\r\n  }\r\n\r\n  _checkResponse(res) {\r\n    if(res.ok) {\r\n      return res.json();\r\n    }\r\n    return Promise.reject(`Ошибка: ${res.status}`);\r\n  }\r\n}\r\n\r\nconst api = new Api('https://mesto.nomoreparties.co/v1/cohort-20', 'aeac4cc4-9284-4753-bb8f-afa2eb1b5233');\r\n\r\nexport default api;\r\n","class Auth {\r\n  constructor(baseUrl) {\r\n    this._url = baseUrl;\r\n  }\r\n\r\n  // регистрация\r\n  signup(password, email) {\r\n    return fetch(`${this._url}/signup`, {\r\n      method: 'POST',\r\n      headers: {\r\n        \"Content-Type\": \"application/json\"\r\n      },\r\n      body: JSON.stringify({\r\n        \"password\": password,\r\n        \"email\": email\r\n      })\r\n    })\r\n    .then(this._checkResponse)\r\n  }\r\n\r\n  // авторизация\r\n  signin(password, email) {\r\n    return fetch(`${this._url}/signin`, {\r\n      method: 'POST',\r\n      headers: {\r\n        \"Content-Type\": \"application/json\"\r\n      },\r\n      body: JSON.stringify({\r\n        \"password\": password,\r\n        \"email\": email\r\n      })\r\n    })\r\n    .then(this._checkResponse)\r\n  }\r\n\r\n  // проверка токена\r\n  getContent(token) {\r\n    return fetch(`${this._url}/users/me`, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Accept': 'application/json',\r\n        \"Content-Type\": \"application/json\",\r\n        \"Authorization\" : `Bearer ${token}`\r\n      }\r\n    })\r\n    .then(this._checkResponse)\r\n    .then(data => data)\r\n  }\r\n\r\n  _checkResponse(res) {\r\n    if(res.ok) {\r\n      return res.json();\r\n    }\r\n    return Promise.reject(`Ошибка: ${res.status}`);\r\n  }\r\n}\r\n\r\nconst auth = new Auth('https://auth.nomoreparties.co');\r\n\r\nexport default auth;\r\n","import { useState, useEffect } from 'react';\nimport { Switch, Route, Redirect, useHistory } from 'react-router-dom';\nimport Header from './Header.js';\nimport Main from './Main.js';\nimport Footer from './Footer.js';\nimport PopupWithForm from './PopupWithForm.js';\nimport ImagePopup from './ImagePopup.js';\nimport EditProfilePopup from './EditProfilePopup.js';\nimport EditAvatarPopup from './EditAvatarPopup.js';\nimport AddPlacePopup from './AddPlacePopup.js';\nimport Register from './Register.js';\nimport Login from './Login.js';\nimport InfoTooltip from './InfoTooltip.js';\nimport ProtectedRoute from './ProtectedRoute.js';\nimport api from '../utils/api.js';\nimport auth from '../utils/auth.js';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext.js';\n\nfunction App() {\n\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = useState(false);\n  const [isInfoTooltipOpen, setIsInfoTooltipOpen] = useState(false);\n  const [selectedCard, setSelectedCard] = useState(null);\n  const [currentUser, setCurrentUser] = useState({});\n  const [cards, setCards] = useState([]);\n  const [loggedIn, setLoggedIn] = useState(false);\n  const [currentUserEmail, setCurrentUserEmail] = useState('');\n  const [infoTooltip, setInfoTooltip] = useState(false);\n  const history = useHistory();\n\n  useEffect(() => {\n    api.getUserInfo()\n      .then((data) => {\n        setCurrentUser(data);\n  })\n      .catch(err => console.log(err));\n  }, []);\n\n  useEffect(() => {\n    api.getInitialCards()\n      .then((cards) => {\n        setCards(cards);\n  })\n      .catch(err => console.log(err));\n  }, []);\n\n  useEffect(() => {\n    tokenCheck();\n  });\n\n  function handleUpdateUser(user) {\n    api.patchUserInfo(user)\n      .then(data => setCurrentUser(data))\n      .then(closeAllPopups)\n      .catch(err => console.log(err))\n  }\n\n  function handleUpdateAvatar(avatar) {\n    api.patchUserAvatar(avatar)\n      .then(data => setCurrentUser(data))\n      .then(closeAllPopups)\n      .catch(err => console.log(err))\n  }\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n\n    api.toggleLikeCardStatus(card._id, !isLiked).then((newCard) => {\n        setCards((state) => state.map((c) => c._id === card._id ? newCard : c));\n    });\n  }\n\n  function handleCardDelete(card) {\n    api.deleteCard(card._id)\n        .then(\n            setCards(cards.filter(i => i._id !== card._id))\n        )\n        .catch(err => console.log(err))\n  }\n\n  function handleAddPlaceSubmit(item) {\n    api.postCard(item)\n      .then((newCard) => {\n        setCards([...cards, newCard]);\n      })\n      .then(closeAllPopups)\n      .catch(err => console.log(err))\n  }\n\n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpen(true);\n  }\n\n  function handleAddPlaceClick() {\n    setIsAddPlacePopupOpen(true);\n  }\n\n  function handleEditAvatarClick() {\n    setIsEditAvatarPopupOpen(true);\n  }\n\n  function handleCardClick(selectedCard) {\n    setSelectedCard(selectedCard);\n  }\n\n  function closeAllPopups() {\n    setIsEditProfilePopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setIsEditAvatarPopupOpen(false);\n    setSelectedCard(null);\n    setIsInfoTooltipOpen(false);\n  }\n\n  function onLogin(email, password) {\n    auth.signin(password, email)\n      .then((res) => {\n        if(res) {\n          setLoggedIn(true);\n          setCurrentUserEmail(email);\n          localStorage.setItem('jwt', res.token);\n          history.push('/');\n        } else {\n          setIsInfoTooltipOpen(true);\n          setInfoTooltip(false);\n        }\n      })\n      .catch(err => console.log(err))\n  }\n\n  function onRegister(email, password) {\n    auth.signup(password, email)\n      .then((res) => {\n        setIsInfoTooltipOpen(true);\n        if(res) {\n          setInfoTooltip(true);\n          history.push('/sign-in');\n        } else {\n          setInfoTooltip(false);\n        }\n      })\n      .catch(err => console.log(err))\n  }\n\n  function onLogOut() {\n    localStorage.removeItem('jwt');\n    history.push('/sign-in');\n  }\n\n  function tokenCheck() {\n    if(localStorage.getItem('jwt')) {\n      const token = localStorage.getItem('jwt');\n      if(token) {\n        auth.getContent(token)\n          .then((res) => {\n            if(res) {\n              setCurrentUserEmail(res.data.email);\n            };\n            setLoggedIn(true);\n            history.push('/');\n          })\n          .catch(err => console.log(err))\n      }\n    }\n  }\n\n  return (\n\n      <CurrentUserContext.Provider value={currentUser}>\n        <Header\n          currentUserEmail={currentUserEmail}\n          onLogOut={onLogOut}\n        />\n        <Switch>\n          <ProtectedRoute\n            exact path='/'\n            loggedIn={loggedIn}\n            component={Main}\n            cards={cards}\n            onEditProfile={handleEditProfileClick}\n            onAddPlace={handleAddPlaceClick}\n            onEditAvatar={handleEditAvatarClick}\n            onCardClick={handleCardClick}\n            onCardLike={handleCardLike}\n            onCardDelete={handleCardDelete}\n          />\n          <ProtectedRoute\n            exact path='/'\n            loggedIn={loggedIn}\n            component={Footer}\n          />\n          <Route path='/sign-up'>\n            <Register onRegister={onRegister} />\n          </Route>\n          <Route path='/sign-in'>\n            <Login onLogin={onLogin} />\n          </Route>\n          <Route>\n            {loggedIn\n              ? (<Redirect to='/'/>)\n              : (<Redirect to='/sign-up'/>)\n            }\n          </Route>\n        </Switch>\n        <InfoTooltip\n          status={infoTooltip}\n          isOpen={isInfoTooltipOpen}\n          onClose={closeAllPopups}\n        />\n        <EditProfilePopup\n          isOpen={isEditProfilePopupOpen}\n          onClose={closeAllPopups}\n          onUpdateUser={handleUpdateUser}\n        />\n\n        <AddPlacePopup\n          isOpen={isAddPlacePopupOpen}\n          onClose={closeAllPopups}\n          onAddPlace={handleAddPlaceSubmit}\n        />\n\n        <ImagePopup\n          card={selectedCard}\n          onClose={closeAllPopups}\n        />\n\n        <PopupWithForm\n          title={'Вы уверены?'}\n          name={'confirm-form'}\n          buttonTitle={'Да'}\n        >\n        </PopupWithForm>\n\n        <EditAvatarPopup\n          isOpen={isEditAvatarPopupOpen}\n          onClose={closeAllPopups}\n          onUpdateAvatar={handleUpdateAvatar}\n        />\n      </CurrentUserContext.Provider>\n\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport './index.css';\nimport App from './components/App.js';\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n"],"sourceRoot":""}